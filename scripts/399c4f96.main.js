function isTimeToday(a){var b=new Date,c=new Date(a),d=864e5;return c.getTime()>b.getTime()&&c.getTime()<b.getTime()+d}function createTime(a){var b=new Date,c=new Date(a),d="";return c.getDate()==b.getDate()?d+="Idag ":c.getDate()==b.getDate()+1&&(d+="Imorgon "),d+=c.getHours()+":00"}function addTime(a){new Date(a.validTime);if(okToPlay(a.ws,a.gust)){var b=document.getElementById("times");"<p>Hittade inga tider :(</p>"==b.innerHTML&&(b.innerHTML=""),b.innerHTML+="<p>"+createTime(a.validTime)+": "+a.ws+" ("+a.gust+")</p>"}}function okToPlay(a,b){return MAX_WS>=a&&MAX_GUST>=b}function getData(){{var a="http://opendata-download-metfcst.smhi.se/api/category/pmp1.5g/version/1/geopoint/lat/"+LAT+"/lon/"+LNG+"/data.json";$.getJSON(a,function(a){$.each(a,function(a,b){if("referenceTime"==a);else if("timeseries"==a)for(var c in b){var d=(b[c].ws,b[c].gust,b[c].validTime);isTimeToday(d)&&addTime(b[c])}})})}}function refreshStuff(){var a=document.getElementById("times");a.innerHTML="<p>Hittade inga tider :(</p>",getData()}function setLatLng(a,b){LAT=a.toFixed(6),LNG=b.toFixed(6),console.log("Lat: "+LAT),console.log("Lng: "+LNG)}function initializeGM(){var a={center:kville,zoom:16};map=new google.maps.Map(document.getElementById("map-canvas"),a);var b=addMarker(kville,"Herkulesparken",GREEN);markers.push(b),google.maps.event.addListener(markers[0],"click",function(){console.log(kville),setLatLng(kville.lat(),kville.lng()),map.panTo(kville),refreshStuff()}),google.maps.event.addListener(map,"click",function(a){addMarker(a.latLng,"Kan man spela hÃ¤r?",RED),map.panTo(a.latLng),setLatLng(a.latLng.lat(),a.latLng.lng()),refreshStuff()})}function addMarker(a,b,c){var d=new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|"+c,new google.maps.Size(21,34),new google.maps.Point(0,0),new google.maps.Point(10,34)),e=new google.maps.Marker({position:a,map:map,title:b,icon:d});return map.panTo(a),e}var MAX_WS=5,MAX_GUST=10;$(function(){$("#ws-slider").slider({range:"max",min:0,max:20,value:MAX_WS,slide:function(a,b){$("#amount_ws").val(b.value),MAX_WS=b.value,refreshStuff()}}),$("#amount_ws").val($("#ws-slider").slider("value"))}),$(function(){$("#gust-slider").slider({range:"max",min:0,max:20,value:MAX_GUST,slide:function(a,b){$("#amount_gust").val(b.value),MAX_GUST=b.value,refreshStuff()}}),$("#amount_gust").val($("#gust-slider").slider("value"))}),$(function(){$("#amount_ws").on("input",function(){console.log($(this).val()),MAX_WS=$(this).val(),refreshStuff()})}),$(function(){$("#amount_gust").on("input",function(){MAX_GUST=$(this).val(),refreshStuff()})});var map,kville=new google.maps.LatLng(57.716689,11.949107),markers=[],RED="fe7569",GREEN="0f9600";$(".scroll").click(function(a){a.preventDefault();var b=0;b=$(this.hash).offset().top>$(document).height()-$(window).height()?$(document).height()-$(window).height():$(this.hash).offset().top,$("html,body").animate({scrollTop:b},1e3,"swing")});